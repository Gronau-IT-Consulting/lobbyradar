<!DOCTYPE html>
<html lang="de" ng-app="Station">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Lobbyradarstation</title>

	<link rel="stylesheet" type="text/css" href="assets/bower_components/roboto-slab-fontface/roboto-slab-fontface.css">
	<link rel="stylesheet" type="text/css" href="assets/bower_components/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="assets/bower_components/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/index.css">
	<script src="assets/bower_components/jquery/dist/jquery.min.js"></script>
	<script src="assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="assets/bower_components/typeahead.js/dist/typeahead.jquery.min.js"></script>
	<script src="assets/bower_components/angular/angular.min.js"></script>
	<script src="assets/bower_components/angular-ui-router/release/angular-ui-router.min.js"></script>
	<script src="assets/bower_components/angular-resource/angular-resource.min.js"></script>
	<script src="assets/bower_components/ng-table/ng-table.min.js"></script>
	<script src="assets/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
	<script src="assets/js/station.js"></script>
</head>
<body ng-controller="AppCtrl">

<nav class="navbar navbar-default navbar-static-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Navigation anzeigen</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<img class="navbar-img" src="/assets/images/lobbyradar.png">
			<a class="navbar-brand" href ui-sref="start">
				Lobbyradarstation</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav navbar-right" ng-if="loggedInUser">

				<li ui-sref-active="active"><a href ui-sref="persons">Personen</a></li>
				<li ui-sref-active="active"><a href ui-sref="organisations">Organisationen</a></li>
				<li ui-sref-active="active"><a href ui-sref="relations">Verbindungen</a></li>

				<li class="dropdown">
					<a href class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mehr <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li class="active" ui-sref-active="active"><a href ui-sref="start">Start</a></li>
						<li ui-sref-active="active"><a href ui-sref="whitelist">Whitelist</a></li>
						<li ui-sref-active="active"><a href ui-sref="update">Updates</a></li>
						<li ui-sref-active="active" ng-if="loggedInUser.admin"><a href ui-sref="fields">Datenfelder</a></li>
						<li ui-sref-active="active" ng-if="loggedInUser.admin"><a href ui-sref="users">Benutzerinnen</a></li>
						<li role="presentation" class="divider"></li>
						<li><a href ng-click="logout()">Abmelden</a></li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
</nav>

<div class="container">
	<div ui-view></div>
	<br/>
</div>

<script type="text/ng-template" id="partials/pager-blank.html"></script>

<script type="text/ng-template" id="partials/pager.html">
	<div class="row" ng-controller="PagerCtrl">
		<div class="col-md-3">
			<div class="btn btn-default" ng-class="{disabled:params.page()==1}" ng-click="params.page(1)" href="">&laquo; Erste</div>
			<div class="btn btn-default" ng-class="{disabled:params.page()==1}" ng-click="params.page(params.page()-1)" href="">&laquo; Vorherige</div>
		</div>
		<div class="col-md-6">
			<table class="table">
				<tr>
					<td>Seite:</td>
					<td>
						<span ng-bind="params.page()"></span> von
						<span ng-bind="pagecount()"></span>
					</td>
				</tr>
				<tr>
					<td>Anzahl pro Seite:</td>
					<td>
						<div class="btn-group small">
							<button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default">10</button>
							<button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default">25</button>
							<button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default">50</button>
							<button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default">100</button>
							<button type="button" ng-class="{'active':params.count() == 500}" ng-click="params.count(500)" class="btn btn-default">500</button>
						</div>
					</td>
				</tr>
			</table>
		</div>
		<div class="col-md-3 text-right">
			<div class="btn btn-default" ng-class="{disabled:(params.page()>=pagecount())}" ng-click="params.page(params.page()+1)">Nächste &raquo;</div>
			<div class="btn btn-default" ng-class="{disabled:(params.page()>=pagecount())}" ng-click="params.page(pagecount())">Letzte &raquo;</div>
		</div>
	</div>
</script>

<script type="text/ng-template" id="partials/start.html">

	<div class="jumbotron">
		<div class="row">
			<div class="col-md-6">
				<img src="/assets/images/lobbyradar.png" style="height: 230px">
			</div>
			<div class="col-md-6">
				<h1>
					Lobby<br/>radar<br/>station</h1>
			</div>
		</div>
	</div>

	<div class="row start">
		<div class="col-lg-6">
			<h4><a href ui-sref="organisations">Organisationen</a></h4>

			<p><a href ui-sref="organisations">Die Liste der an Lobbyismus beteiligten Organisationen </a></p>

			<h4><a href ui-sref="persons">Personen</a></h4>

			<p><a href ui-sref="persons">Die Liste der an Lobbyismus beteiligten Personen</a></p>

			<h4><a href ui-sref="relations">Verbindungen</a></h4>

			<p><a href ui-sref="relations">Verbindungen zwischen Organisationen und Personen</a></p>
		</div>

		<div class="col-lg-6">
			<h4><a href ui-sref="whitelist">Whitelist</a></h4>

			<p><a href ui-sref="whitelist">Liste der Seiten auf denen das Lobbyradar-Plugin aktiv ist </a></p>

			<h4><a href ui-sref="update">Updates</a></h4>

			<p><a href ui-sref="update">Daten Updates von den Scrapern</a></p>

			<h4 ng-if="loggedInUser.admin"><a href ui-sref="fields">Datenfelder</a></h4>

			<p ng-if="loggedInUser.admin"><a href ui-sref="fields">Definition der Ablage von Informationen</a></p>

			<h4 ng-if="loggedInUser.admin"><a href ui-sref="users">Benutzerinnenverwaltung</a></h4>

			<p ng-if="loggedInUser.admin"><a href ui-sref="users">Zugänge zur Lobbyradarstation</a></p>
		</div>
	</div>
</script>

<script type="text/ng-template" id="partials/persons.html">

	<div class="row">
		<div class="col-md-4 headline">
			<h1>Personen</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>

		</div>
		<div class="col-md-5">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ui-sref="person({id: 'new'})">Person anlegen</button>
					<div class="btn-group">
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
							Daten anzeigen <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li ng-repeat="o in fields" ng-class="{active:isFieldActive(o)}"><a href ng-click="toggleField(o)" ng-bind="o.name"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>

	<div ng-if="loading" class="loading">
		<h1><i class="fa fa-spin fa-spinner"></i> Personen-Liste<br/>wird geladen</h1>
	</div>

	<form class="form-inline">
		<label class="checkbox-inline">
			<input type="checkbox" ng-model="checks.enabled"> Massenzuweisung Schlagworte
		</label>
		<label class="checkbox-inline">
			<input type="checkbox" ng-checked="filter.special" ng-click="toggleSpecialFilter()"> Nicht-Standard-Namen filtern
		</label>
		<label class="checkbox-inline">
			<input type="checkbox" ng-model="hasRelationWith.enabled" ng-click="hasRelationWith.checkFilter()"> Nach Verbindung filtern
		</label>
	</form>

	<div class="well" ng-show="hasRelationWith.enabled">
		<form class="form">
			<label>Hat Verbindung mit</label>

			<div class="form-group">
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Person/Organisation auswählen" ng-model="hasRelationWith.value" datasets="hasRelationWith.dataset" ngtypeahead>

					<div class="input-group-btn">
						<button type="button" class="btn btn-default" ng-click="hasRelationWith.filter()">Filtern</button>
					</div>
				</div>
			</div>
		</form>
	</div>

	<div class="well" ng-show="checks.enabled">
		<form class="form">
			<label>Schlagwort</label>

			<div class="form-group">
				<input type="text" class="form-control" placeholder="Text" ng-model="checks.value" datasets="checks.dataset" ngtypeahead>
			</div>
		</form>

		<button type="button" class="btn btn-default" ng-click="addTag()">Schlagwort hinzufügen</button>
		<button type="button" class="btn btn-default" ng-click="removeTag()">Schlagwort entfernen</button>
	</div>

	<table ng-table="tableParams" template-pagination="partials/pager.html" show-filter="false" class="table table-striped">

		<thead>
		<tr>
			<th ng-if="checks.enabled"></th>
			<th ng-repeat="f in state.fields"
				class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy(f._id, 'asc'),
                    'sort-desc': tableParams.isSortBy(f._id, 'desc')
                  }"
				ng-click="tableParams.sorting(f._id, tableParams.isSortBy(f._id, 'asc') ? 'desc' : 'asc')">
				<span ng-bind="f.name"></span>
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy(f._id, 'asc'),'fa-sort-desc':tableParams.isSortBy(f._id, 'desc')}" class="fa"></span>
			</th>

			<th class="text-right">Aktionen</th>
		</tr>
		</thead>

		<tbody>
		<tr ng-repeat="p in $data">
			<td ng-if="checks.enabled"><input type="checkbox" ng-model="p.$checked"></td>
			<td ng-repeat="f in state.fields">
				<span ng-bind="getDispayValues(f,p)"></span>
				<span ng-show="f._type!=='extras'" class="btn-left" title="{{f.name}} bearbeiten" ng-click="editData(f,p)"><i class="fa fa-pencil"></i></span>
			</td>
			<td class="col-action-large">
				<span class="btn-right" ng-click="remove(p)" title="Person löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" ng-click="relationsDialog(p)" title="Verbindungen bearbeiten"><i class="fa fa-link"></i></span>
				<span class="btn-right" ng-click='mergeDialog(p)' title="Personen zusammenführen"><i class="fa fa-code-fork fa-rotate-270"></i></span>
				<span class="btn-right" ui-sref='person({id: p._id})' title="Person bearbeiten"><i class="fa fa-edit"></i></span>
				<a class="btn-right" target="_blank" ng-href='/entity/{{p._id}}' title="Person ansehen"><i class="fa fa-eye"></i></a>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/organisations.html">

	<div class="row">
		<div class="col-md-4 headline">
			<h1>Organisationen</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>

		</div>

		<div class="col-md-5">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ui-sref="organisation({id: 'new'})">Organisation anlegen</button>
					<div class="btn-group">
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
							Daten anzeigen <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li ng-repeat="o in fields" ng-class="{active:isFieldActive(o)}"><a href ng-click="toggleField(o)" ng-bind="o.name"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>

	<form class="form-inline">

		<label class="checkbox-inline">
			<input type="checkbox" ng-model="checks.enabled"> Massenzuweisung Schlagworte
		</label>

		<label class="checkbox-inline">
			<input type="checkbox" ng-model="hasRelationWith.enabled" ng-click="hasRelationWith.checkFilter()"> Nach Verbindung filtern
		</label>

	</form>

	<div class="well" ng-show="checks.enabled">
		<form class="form">
			<label>Schlagwort</label>

			<div class="form-group">
				<input type="text" class="form-control" placeholder="Text" ng-model="checks.value" datasets="checks.dataset" ngtypeahead>
			</div>
		</form>

		<button type="button" class="btn btn-default" ng-click="addTag()">Schlagwort hinzufügen</button>
		<button type="button" class="btn btn-default" ng-click="removeTag()">Schlagwort entfernen</button>
	</div>

	<div class="well" ng-show="hasRelationWith.enabled">
		<form class="form">
			<label>Hat Verbindung mit</label>

			<div class="form-group">
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Person/Organisation auswählen" ng-model="hasRelationWith.value" datasets="hasRelationWith.dataset" ngtypeahead>

					<div class="input-group-btn">
						<button type="button" class="btn btn-default" ng-click="hasRelationWith.filter()">Filtern</button>
					</div>
				</div>
			</div>
		</form>
	</div>

	<div ng-if="loading" class="loading">
		<h1><i class="fa fa-spin fa-spinner"></i> Organisationen-Liste<br/>wird geladen</h1>
	</div>

	<table ng-table="tableParams" template-pagination="partials/pager.html" show-filter="false" class="table table-striped">

		<thead>
		<tr>
			<th ng-if="checks.enabled"></th>
			<th ng-repeat="f in state.fields"
				class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy(f._id, 'asc'),
                    'sort-desc': tableParams.isSortBy(f._id, 'desc')
                  }"
				ng-click="tableParams.sorting(f._id, tableParams.isSortBy(f._id, 'asc') ? 'desc' : 'asc')">
				<span ng-bind="f.name"></span>
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy(f._id, 'asc'),'fa-sort-desc':tableParams.isSortBy(f._id, 'desc')}" class="fa"></span>
			</th>
			<th class="text-right">Aktionen</th>
		</tr>
		</thead>

		<tbody>
		<tr ng-repeat="p in $data">
			<td ng-if="checks.enabled"><input type="checkbox" ng-model="p.$checked"></td>
			<td ng-repeat="f in state.fields">
				<span ng-bind="getDispayValues(f,p)"></span>
				<span ng-show="f._type!=='extras'" class="btn-left" title="{{f.name}} bearbeiten" ng-click="editData(f,p)"><i class="fa fa-pencil"></i></span>
			</td>
			<td class="col-action-large">
				<span class="btn-right" ng-click="remove(p)" title="Organisation löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" ng-click="relationsDialog(p)" title="Verbindungen bearbeiten"><i class="fa fa-link"></i></span>
				<span class="btn-right" ng-click='mergeDialog(p)' title="Organisationen zusammenführen"><i class="fa fa-code-fork fa-rotate-270"></i></span>
				<span class="btn-right" ui-sref='organisation({id: p._id})' title="Organisation bearbeiten"><i class="fa fa-edit"></i></span>
				<a class="btn-right" target="_blank" ng-href='/entity/{{p._id}}' title="Organisation ansehen"><i class="fa fa-eye"></i></a>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/entities.html">

	<div class="row">
		<div class="col-md-4 headline">
			<h1>Entitäten</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>
		</div>

		<div class="col-md-5">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ui-sref="organisation({id: 'new'})">Organisation anlegen</button>
					<button class="btn btn-default" ui-sref="person({id: 'new'})">Person anlegen</button>
					<div class="btn-group">
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
							Daten anzeigen <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li ng-repeat="o in fields" ng-class="{active:isFieldActive(o)}"><a href ng-click="toggleField(o)" ng-bind="o.name"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>


		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>
	<div ng-if="loading" class="loading">
		<h1><i class="fa fa-spin fa-spinner"></i> Entitäten-Liste<br/>wird geladen</h1>
	</div>

	<table ng-table="tableParams" template-pagination="partials/pager.html" show-filter="false" class="table table-striped">

		<thead>
		<tr>
			<th ng-repeat="f in state.fields"
				class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy(f._id, 'asc'),
                    'sort-desc': tableParams.isSortBy(f._id, 'desc')
                  }"
				ng-click="tableParams.sorting(f._id, tableParams.isSortBy(f._id, 'asc') ? 'desc' : 'asc')">
				<span ng-bind="f.name"></span>
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy(f._id, 'asc'),'fa-sort-desc':tableParams.isSortBy(f._id, 'desc')}" class="fa"></span>
			</th>
			<th class="text-right">Aktionen</th>
		</tr>
		</thead>

		<tbody>
		<tr ng-repeat="p in $data">
			<td ng-repeat="f in state.fields">
				<span ng-bind="getDispayValues(f,p)"></span>
				<span ng-show="f._type!=='extras'" class="btn-left" title="{{f.name}} bearbeiten" ng-click="editData(f,p)"><i class="fa fa-pencil"></i></span>
			</td>
			<td class="col-action-large">
				<span class="btn-right" ng-click="remove(p)" title="Entität löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" ng-click="relationsDialog(p)" title="Verbindungen bearbeiten"><i class="fa fa-link"></i></span>
				<span class="btn-right" ng-click='mergeDialog(p)' title="Entität zusammenführen"><i class="fa fa-code-fork fa-rotate-270"></i></span>
				<span class="btn-right" ng-if="p.type!=='person'" ui-sref='organisation({id: p._id})' title="Organisation bearbeiten"><i class="fa fa-edit"></i></span>
				<span class="btn-right" ng-if="p.type=='person'" ui-sref='person({id: p._id})' title="Person bearbeiten"><i class="fa fa-edit"></i></span>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/relations.html">

	<div class="row">
		<div class="col-md-4 headline">
			<h1>Verbindungen</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>
		</div>


		<div class="col-md-5">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ui-sref="relation({id: 'new'})">Verbindung anlegen</button>
					<div class="btn-group">
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
							Daten anzeigen <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li ng-repeat="o in fields" ng-class="{active:isFieldActive(o)}"><a href ng-click="toggleField(o)" ng-bind="o.name"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>
	<div ng-if="loading" class="loading">
		<h1><i class="fa fa-spin fa-spinner"></i> Verbindungen-Liste<br/>wird geladen</h1>
	</div>

	<form class="form-inline">
		<label class="checkbox-inline">
			<input type="checkbox" ng-model="checks.enabled"> Massenzuweisung Schlagworte
		</label>
	</form>

	<div class="well" ng-show="checks.enabled">
		<form class="form">
			<label>Schlagwort</label>

			<div class="form-group">
				<input type="text" class="form-control" placeholder="Text" ng-model="checks.value" datasets="checks.dataset" ngtypeahead>
			</div>
		</form>

		<button type="button" class="btn btn-default" ng-click="addTag()">Schlagwort hinzufügen</button>
		<button type="button" class="btn btn-default" ng-click="removeTag()">Schlagwort entfernen</button>
	</div>

	<table ng-table="tableParams" template-pagination="partials/pager.html" show-filter="false" class="table table-striped">

		<thead>
		<tr>
			<th ng-if="checks.enabled"></th>
			<th ng-repeat="f in state.fields"
				class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy(f._id, 'asc'),
                    'sort-desc': tableParams.isSortBy(f._id, 'desc')
                  }"
				ng-click="tableParams.sorting(f._id, tableParams.isSortBy(f._id, 'asc') ? 'desc' : 'asc')">
				<span ng-bind="f.name"></span>
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy(f._id, 'asc'),'fa-sort-desc':tableParams.isSortBy(f._id, 'desc')}" class="fa"></span>
			</th>
			<th class="text-right">Aktionen</th>
		</tr>
		</thead>

		<tbody>
		<tr ng-repeat="p in $data">
			<td ng-if="checks.enabled"><input type="checkbox" ng-model="p.$checked"></td>
			<td ng-repeat="f in state.fields">
				<span ng-bind="getDispayValues(f,p)"></span>
				<span ng-show="f._type!=='extras'" class="btn-left" title="{{f.name}} bearbeiten" ng-click="editData(f,p)"><i class="fa fa-pencil"></i></span>
			</td>
			<td class="col-action">
				<span class="btn-right" ng-click="remove(p)" title="Verbindung löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" ui-sref='relation({id: p._id})' title="Verbindung bearbeiten"><i class="fa fa-edit"></i></span>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/editor.html">

	<h1><span ng-bind="modename"></span> <span ng-if="isNew">anlegen</span><span ng-if="!isNew">bearbeiten</span></h1>

	<div ng-include="'partials/entity-edit.html'"></div>

	<div class="pull-right">
		<button ng-if="!isNew" class="btn btn-primary" ng-click="save()">Aktualisieren</button>
		<button ng-if="isNew" class="btn btn-primary" ng-click="createnew()">Anlegen</button>
		<button type="button" class="btn btn-default" ng-click="back()">Abbruch</button>
	</div>

	<hr/>

	<h1>Verbindungen</h1>

	<div ng-include="'partials/relations-owned.html'"></div>

</script>

<script type="text/ng-template" id="partials/entity-edit.html">
	<form role="form">

		<div class="form-group">
			<label for="name">Name</label>
			<input type="text" class="form-control" id="name" placeholder="Name" ng-model="item.name">
		</div>

		<div class="row">

			<div class="form-group col-md-6">
				<label>Aliase</label>

				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="Aliase" ng-model="edit.aliases" ng-enter="addEntry('aliases', edit.aliases)">
					<span ng-show="canAddEntry('aliases', edit.aliases)" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addEntry('aliases', edit.aliases)"></span>
				</div>
				<div class="label-list">
					<div ng-repeat="o in item.aliases" class="label label-default"><span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Alias entfernen" ng-click="removeEntry('aliases', o)"></i></div>
				</div>
			</div>
			<div class="form-group col-md-6">
				<label>Schlagworte</label>
				<span class="dropdown dropdown-btn-right">
					<a role="button" data-toggle="dropdown" class="dropdown-toggle" href><span class="caret"></span>&nbsp;</a>
					<ul role="menu" class="dropdown-menu">
						<li ng-repeat="t in tags"><a href ng-click="addEntry('tags', t)" ng-bind="t"></a></li>
					</ul>
				</span>

				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="Schlagworte" ng-model="edit.tags" datasets="datasetTags" ngtypeahead>
					<span ng-show="canAddEntry('tags', edit.tags)" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addEntry('tags', edit.tags)"></span>
				</div>
				<div class="label-list">
					<div ng-repeat="o in item.tags" class="label label-default"><span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Tag entfernen" ng-click="removeEntry('tags', o)"></i></div>
				</div>
			</div>

		</div>
	</form>

	<hr/>

	<div ngdatafields data-fields="item.data" data-fieldsowner="item"></div>


	<hr/>

	<div class="btn-group">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
			Datenfeld hinzufügen <span class="caret"></span>
		</button>

		<ul class="dropdown-menu up" role="menu">
			<li ng-repeat="o in fields"><a href ng-click="addData(o)" ng-bind="o.name"></a></li>
		</ul>
	</div>

</script>

<script type="text/ng-template" id="partials/update-entity-modal.html">
	<div ng-controller="ModalUpdateEditorCtrl">
		<div class="modal-header">
			<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
			<h4 class="modal-title"><span ng-bind="modename"></span> bearbeiten</h4>
		</div>
		<div class="modal-body">
			<div ng-include="'partials/entity-edit.html'"></div>
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary" ng-click="ok()">Aktualisieren</button>
			<button type="button" class="btn btn-warning" ng-click="cancel()">Abbruch</button>
		</div>
	</div>
</script>

<script type="text/ng-template" id="partials/relations-modal.html">

	<div class="modal-header">
		<button type="button" class="close" ng-click="ok()" aria-hidden="true">&times;</button>
		<h4 class="modal-title">
			Verbindungen {{data.item.name}}
		</h4>
	</div>

	<div class="modal-body">
		<div ng-include="'partials/relations-owned.html'" ng-init="item=data.item;"></div>
	</div>

	<div class="modal-footer">
		<button class="btn btn-warning" ng-click="ok()">Schliessen</button>
	</div>
</script>

<script type="text/ng-template" id="partials/relations-owned.html">
	<div ng-controller="RelationsOwnedListCtrl">
		<p>
			<button class="btn btn-default" ng-click="enter()">Verbindung anlegen</button>
		</p>
		<table class="table table-striped">
			<head>
				<tr>
					<th>Name</th>
					<th>Art</th>
					<th>Schlagworte</th>
					<th class="text-right">Aktionen</th>
				</tr>
			</head>
			<tbody>
			<tr ng-repeat="o in relations">
				<td ng-bind="o.entity.name"></td>
				<td ng-bind="o.type"></td>
				<td ng-bind="o.tags"></td>
				<td class="col-action">
					<span class="btn-right" ng-click="remove(o)" title="Verbindung löschen"><i class="fa fa-trash"></i></span>
					<span class="btn-right" ng-click="edit(o)" title="Verbindung bearbeiten"><i class="fa fa-edit"></i></span>
				</td>
			</tr>
			</tbody>
		</table>
	</div>
</script>

<script type="text/ng-template" id="partials/filter.html">
	<div class="pull-right">
		<label>Filter</label>

		<div class="input-group">
			<input type="text" class="form-control" ng-model="filter.text" placeholder="Filter {{filter.mode.name}}" ng-enter="refilter()">

			<div class="input-group-btn" ng-show="fields.length>1">
				<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
				<ul class="dropdown-menu dropdown-menu-right" role="menu">

					<li ng-class="{active:!filter.mode}"><a href ng-click="setFilterMode(null)">Alle Felder</a></li>
					<li><a href ng-show="filter.text.length>0" ng-click="resetFilter()"><i class="fa fa-remove"></i> Filter entfernen</a></li>
					<li class="divider"></li>
					<li ng-repeat="o in state.fields" ng-class="{active:filter.mode==o}" ng-click="setFilterMode(o)"><a href ng-bind="o.name"></a></li>
				</ul>
			</div>
		</div>
	</div>
</script>

<script type="text/ng-template" id="partials/users.html">

	<div class="row">
		<div class="col-md-6 headline">
			<h1>Benutzerinnen</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>
		</div>

		<div class="col-md-3">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ui-sref="user({id: 'new'})">Benutzerin anlegen</button>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>

	<table ng-table="tableParams" template-pagination="partials/pager-blank.html" class="table table-striped">
		<thead>
		<tr>
			<th class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy('name', 'asc'),
                    'sort-desc': tableParams.isSortBy('name', 'desc')
                  }" ng-click="tableParams.sorting('name', tableParams.isSortBy('name', 'asc') ? 'desc' : 'asc')">Name
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('name', 'asc'),'fa-sort-desc':tableParams.isSortBy('name', 'desc')}" class="fa"></span>
			</th>
			<th class="text-right">Aktionen</th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="p in $data">
			<td ng-bind="p.name">
			</td>
			<td>
				<span class="btn-right" ng-click="remove(p)" title="Benutzerin löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" ui-sref='user({id: p._id})' title="Benutzerin bearbeiten"><i class="fa fa-edit"></i></span>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/login.html">
	<div class="row">
		<div class="col-md-5 col-md-offset-3">
			<div id="headline">
				<h1>Login</h1>
			</div>
			<form class="form form-signin" role="form">
				<div class="form-group input-group">
					<span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
					<input id="login-user" type="text" name="username" class="form-control input-block-level" placeholder="Name" ng-model="login.username" required>
				</div>
				<div class="form-group input-group">
					<span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
					<input id="login-pass" type="password" name="password" class="form-control input-block-level" placeholder="Passwort" ng-model="login.password" required>
				</div>
				<div class="form-group">
					<button class="btn btn-lg btn-primary btn-block" ng-click="loginUser()">Login</button>
				</div>
				<div ng-show="error" class="alert alert-danger" ng-bind="error.data"></div>
			</form>
		</div>
	</div>
</script>

<script type="text/ng-template" id="partials/user.html">

	<div class="row">
		<div class="col-md-6 col-md-offset-3">
			<h1>Benutzerin <span ng-if="isNew">anlegen</span><span ng-if="!isNew">bearbeiten</span></h1>

			<form class="form">
				<div class="form-group">
					<label>Name</label>
					<input type="text" class="form-control" placeholder="Name" ng-model="user.name">
				</div>
				<div class="form-group">
					<label>Passwort</label>
					<input type="text" class="form-control" placeholder="Passwort" ng-model="user.pass">
				</div>
				<div class="form-group">
					<label>
						<input type="checkbox" ng-model="user.admin"> Administratorrechte
					</label>
				</div>
			</form>
			<div class="pull-right">
				<button ng-if="!isNew" class="btn btn-primary" ng-click="save()">Aktualisieren</button>
				<button ng-if="isNew" class="btn btn-primary" ng-click="createnew()">Anlegen</button>
				<button class="btn btn-default" ui-sref="users">Abbruch</button>
			</div>
		</div>
	</div>


</script>

<script type="text/ng-template" id="partials/fields.html">

	<div class="row">
		<div class="col-md-6 headline">
			<h1>Datenfelder</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>
		</div>

		<div class="col-md-3">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ui-sref="field({id: 'new'})">Datenfeld anlegen</button>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>


	<table ng-table="tableParams" template-pagination="partials/pager-blank.html" class="table table-striped">
		<thead>
		<tr>
			<th class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy('name', 'asc'),
                    'sort-desc': tableParams.isSortBy('name', 'desc')
                  }" ng-click="tableParams.sorting('name', tableParams.isSortBy('name', 'asc') ? 'desc' : 'asc')">Name
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('name', 'asc'),'fa-sort-desc':tableParams.isSortBy('name', 'desc')}" class="fa"></span>
			</th>
			<th class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy('key', 'asc'),
                    'sort-desc': tableParams.isSortBy('key', 'desc')
                  }" ng-click="tableParams.sorting('key', tableParams.isSortBy('key', 'asc') ? 'desc' : 'asc')">Schlüssel
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('key', 'asc'),'fa-sort-desc':tableParams.isSortBy('key', 'desc')}" class="fa"></span>
			</th>
			<th class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy('format', 'asc'),
                    'sort-desc': tableParams.isSortBy('format', 'desc')
                  }" ng-click="tableParams.sorting('format', tableParams.isSortBy('format', 'asc') ? 'desc' : 'asc')">Format
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('format', 'asc'),'fa-sort-desc':tableParams.isSortBy('format', 'desc')}" class="fa"></span>
			</th>


			<th class="sortable" ng-class="{'sort-asc': tableParams.isSortBy('mode', 'asc'), 'sort-desc': tableParams.isSortBy('mode', 'desc')}"
				ng-click="tableParams.sorting('mode', tableParams.isSortBy('mode', 'asc') ? 'desc' : 'asc')">Typ
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('mode', 'asc'),'fa-sort-desc':tableParams.isSortBy('mode', 'desc')}" class="fa"></span>
			</th>
			<th class="sortable" ng-class="{'sort-asc': tableParams.isSortBy('default', 'asc'), 'sort-desc': tableParams.isSortBy('default', 'desc')}"
				ng-click="tableParams.sorting('default', tableParams.isSortBy('default', 'asc') ? 'desc' : 'asc')">Standard
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('default', 'asc'),'fa-sort-desc':tableParams.isSortBy('default', 'desc')}" class="fa"></span>
			</th>
			<th class="text-right">Aktionen</th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="p in $data">
			<td ng-bind="p.name"></td>
			<td ng-bind="p.key"></td>
			<td ng-bind="globals.types[p.format].name"></td>
			<td ng-bind="p.mode"></td>
			<td><span ng-if="p.default">Ja</span><span ng-if="!p.default">Nein</span></td>
			<td>
				<span class="btn-right" ng-click="remove(p)" title="Datenfeld löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" ui-sref='field({id: p._id})' title="Datenfeld bearbeiten"><i class="fa fa-edit"></i></span>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/field.html">

	<div class="row">
		<div class="col-md-6 col-md-offset-3">
			<h1>Feld <span ng-if="isNew">anlegen</span><span ng-if="!isNew">bearbeiten</span></h1>

			<form class="form">
				<div class="form-group">
					<label>Name</label>
					<input type="text" class="form-control" placeholder="Name" ng-model="field.name">
				</div>
				<div class="form-group">
					<label>Schlüssel</label>
					<input type="text" class="form-control" placeholder="Schlüssel" ng-model="field.key">
				</div>
				<div class="form-group">
					<label>Format</label>
					<select class="form-control" ng-model="field.format">
						<option ng-repeat="fieldtype in fieldtypes" value="{{fieldtype.id}}" ng-bind="fieldtype.name"></option>
					</select>
				</div>
				<div class="form-group">
					<label>Typ</label>
					<select class="form-control" ng-model="field.mode">
						<option value="persons">Personen</option>
						<option value="organisations">Organisationen</option>
						<option value="relations">Verbindungen</option>
					</select>
				</div>
				<div class="form-group col-md-12">
					<div class="checkbox">
						<label>
							<input type="checkbox" ng-model="field.default"> Standard (Feld beim Neuanlegen von Entitäten automatisch anlegen)
						</label>
					</div>
				</div>
			</form>
			<div class="pull-right">
				<button ng-if="!isNew" class="btn btn-primary" ng-click="save()">Aktualisieren</button>
				<button ng-if="isNew" class="btn btn-primary" ng-click="createnew()">Anlegen</button>
				<button class="btn btn-default" ui-sref="fields">Abbruch</button>
			</div>
		</div>
	</div>

</script>

<script type="text/ng-template" id="partials/ask.html">

	<div class="modal-header">
		<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
		<h4 class="modal-title">{{data.headline}}</h4>
	</div>
	<div class="modal-body">
		<p>{{data.question}}</p>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="ok()">OK</button>
		<button class="btn btn-warning" ng-click="cancel()">Abbruch</button>
	</div>

</script>

<script type="text/ng-template" id="partials/fieldsedit-modal.html">

	<div class="modal-header">
		<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
		<h4 class="modal-title">Feld bearbeiten</h4>
	</div>
	<div class="modal-body" ng-init="fields=data.fields;fieldsowner=data.fieldsowner;">
		<div ng-include="'partials/datafields.html'"></div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default" ng-show="!data.fields[0].fixed" ng-click="data.newField(fields)">Feld anlegen</button>
		<button class="btn btn-primary" ng-click="ok()">OK</button>
		<button class="btn btn-warning" ng-click="cancel()">Abbruch</button>
	</div>

</script>

<script type="text/ng-template" id="partials/merge-modal.html">

	<div class="modal-header">
		<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
		<h4 class="modal-title">{{data.modename}} zusammenführen</h4>
	</div>
	<div class="modal-body" ng-controller="SearchEntitiesCtrl">
		<form class="form">
			<div class="form-group">
				<label>{{data.entity.name}} zusammenführen mit</label>

				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="{{data.modename}}" ng-model="data.edit.name" datasets="typeaheadDatasetEntities" ngtypeahead>
					<span ng-show="data.edit._id" class="glyphicon glyphicon-ok form-control-feedback"></span>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="ok()">OK</button>
		<button class="btn btn-warning" ng-click="cancel()">Abbruch</button>
	</div>

</script>

<script type="text/ng-template" id="partials/search-modal.html">
	<div class="modal-header">
		<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
		<h4 class="modal-title">{{data.modename}} suchen</h4>
	</div>
	<div class="modal-body" ng-controller="SearchEntitiesCtrl">
		<form class="form">
			<div class="form-group">
				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="{{data.modename}}" ng-model="data.edit.name" datasets="typeaheadDatasetEntities" ngtypeahead>
					<span ng-show="data.edit._id" class="glyphicon glyphicon-ok form-control-feedback"></span>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="ok()">OK</button>
		<button class="btn btn-warning" ng-click="cancel()">Abbruch</button>
	</div>
</script>

<script type="text/ng-template" id="partials/datafield-link.html">
	<form class="form">
		<div class="form-group col-md-6">
			<label>URL</label>
			<input type="text" class="form-control" placeholder="URL" ng-model="d.value.url">
		</div>
		<div class="form-group col-md-6">
			<label>Bemerkung</label>
			<input type="text" class="form-control" placeholder="Bemerkung" ng-model="d.value.remark">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-url.html">
	<form class="form">
		<div class="form-group col-md-12">
			<label>URL</label>
			<input type="text" class="form-control" placeholder="URL" ng-model="d.value">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-address.html">
	<form class="form">

		<div class="form-group col-md-12">
			<label>Name</label>
			<input type="text" class="form-control" placeholder="Name" ng-model="d.value.name">
		</div>

		<div class="form-group col-md-12">
			<label>Adresszeile</label>
			<input type="text" class="form-control" placeholder="Adresszeile" ng-model="d.value.addr">
		</div>

		<div class="form-group col-md-12">
			<label>Straße</label>
			<input type="text" class="form-control" placeholder="Straße" ng-model="d.value.street">
		</div>

		<div class="form-group col-md-4">
			<label>Postleitzahl</label>
			<input type="text" class="form-control" placeholder="Postleitzahl" ng-model="d.value.postcode">
		</div>

		<div class="form-group col-md-4">
			<label>Stadt</label>
			<input type="text" class="form-control" placeholder="Stadt" ng-model="d.value.city">
		</div>

		<div class="form-group col-md-4">
			<label>Land</label>
			<input type="text" class="form-control" placeholder="Land" ng-model="d.value.country">
		</div>

		<div class="form-group col-md-6">
			<label>Telefon</label>
			<input type="text" class="form-control" placeholder="Telefon" ng-model="d.value.tel">
		</div>

		<div class="form-group col-md-6">
			<label>Fax</label>
			<input type="text" class="form-control" placeholder="Fax" ng-model="d.value.fax">
		</div>

		<div class="form-group col-md-6">
			<label>E-Mail</label>
			<input type="text" class="form-control" placeholder="E-Mail" ng-model="d.value.email">
		</div>

		<div class="form-group col-md-6">
			<label>www</label>
			<input type="text" class="form-control" placeholder="www" ng-model="d.value.www">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-date.html">
	<form class="form" ng-controller="DatepickerCtrl" ng-init="dtp_value=d.value;">
		<div class="form-group col-md-6">
			<label>Datum</label>

			<p class="input-group">
				<input type="text" class="form-control" datepicker-options="dtp_dateOptions" datepicker-popup="{{d.value.fmt}}" ng-model="d.value.date" is-open="dtp_opened" ng-required="true" close-text="Schließen"/>
						<span class="input-group-btn">
							<button type="button" class="btn btn-default" ng-click="dtp_open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
						</span>
			</p>
		</div>
		<div class="form-group col-md-6">
			<label>Format</label>
			<select class="form-control" ng-model="d.value.fmt" ng-options="f.fmt as f.name for f in dtp_formats"></select>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-range.html">
	<form class="form">
		<div class="form-group col-md-3">
			<label>Start: Monat</label>

			<p class="input-group">
				<input type="integer" class="form-control" ng-model="d.value.start.month">
			</p>
		</div>
		<div class="form-group col-md-3">
			<label>Start: Jahr</label>

			<p class="input-group">
				<input type="integer" class="form-control" ng-model="d.value.start.year">
			</p>
		</div>
		<div class="form-group col-md-3">
			<label>Ende: Monat</label>

			<p class="input-group">
				<input type="integer" class="form-control" ng-model="d.value.start.month">
			</p>
		</div>
		<div class="form-group col-md-3">
			<label>Ende: Jahr</label>

			<p class="input-group">
				<input type="integer" class="form-control" ng-model="d.value.start.year">
			</p>
		</div>
		<div class="form-group col-md-12">
			<label>Beschreibung</label>
			<input type="text" class="form-control" placeholder="Text" ng-model="d.value.desc">
		</div>
		<div class="form-group col-md-12">
			<label>Quelle</label>
			<input type="text" class="form-control" placeholder="Text" ng-model="d.value.source">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-monthyear.html">
	<form class="form">
		<div class="form-group col-md-6">
			<label>Monat</label>
			<input type="text" class="form-control" ng-model="d.value.month">
		</div>
		<div class="form-group col-md-6">
			<label>Jahr</label>
			<input type="text" class="form-control" ng-model="d.value.year">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-donation.html">
	<form class="form">
		<div class="form-group col-md-6">
			<label>€</label>
			<input type="text" class="form-control" ng-model="d.value.amount">
		</div>
		<div class="form-group col-md-6">
			<label>Jahr</label>
			<input type="text" class="form-control" ng-model="d.value.year">
		</div>
		<div class="form-group col-md-12">
			<label>Quellen</label>
			<div class="form-group" ng-controller="StringsEdit">
				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="Quelle" ng-model="currentedit" ng-enter="addEntry(d.value, 'sources', currentedit)">
					<span ng-show="canAddEntry(d.value, 'sources', currentedit)" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addEntry(d.value, 'sources', currentedit)"></span>
				</div>
				<div class="label-list">
					<div ng-repeat="o in d.value.sources" class="label label-default">
						<span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Entfernen" ng-click="removeEntry(d.value, 'sources', o)"></i>
					</div>
				</div>
			</div>
		</div>
		<div class="form-group col-md-6">
			<label>Verifiziert</label>

			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="d.value.verified"> <span ng-if="d.value.verified"><b>Ja</b>/Nein</span><span ng-if="!d.value.verified">Ja/<b>Nein</b></span>
				</label>
			</div>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-activity.html">
	<form class="form">
		<div class="form-group col-md-6">
			<label>Typ</label>
			<select class="form-control" ng-model="d.value.type" ng-options="x.id as x.name for x in $root.globals.types[d.format].types"></select>
		</div>
		<div class="form-group col-md-6">
			<label>Position</label>
			<input type="text" class="form-control" ng-model="d.value.position">
		</div>
		<div class="form-group col-md-4">
			<label>Periodical</label>
			<input type="text" class="form-control" ng-model="d.value.periodical">
		</div>
		<div class="form-group col-md-4">
			<label>Aktivität</label>
			<input type="text" class="form-control" ng-model="d.value.activity">
		</div>
		<div class="form-group col-md-4">
			<label>Ort</label>
			<input type="text" class="form-control" ng-model="d.value.place">
		</div>
		<div class="form-group col-md-6">
			<label>Level</label>
			<input type="number" class="form-control" ng-model="d.value.level">
		</div>
		<div class="form-group col-md-6">
			<label>Unbezahlt</label>

			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="d.value.unsalaried:"> <span ng-if="d.value.unsalaried"><b>Ja</b>/Nein</span><span ng-if="!d.value.unsalaried">Ja/<b>Nein</b></span>
				</label>
			</div>
		</div>
		<div class="form-group col-md-6" ng-controller="Datepicker2Ctrl" ng-init="dtp_value={val:d.value,name:'start'};">
			<label>Von</label>

			<p class="input-group">
				<input type="text" class="form-control" datepickerMode="{{dtp.mode}}" datepicker-mode="{{dtp.mode}}" datepicker-options="dtp.options" datepicker-popup="{{dtp.fmt.fmt}}" ng-model="dtp.date" is-open="dtp.opened" ng-required="true" close-text="Schließen" ng-blur='dtp.validate()'/>
				<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="dtp.open($event)"><i class="glyphicon glyphicon-calendar"></i></button></span>
				<select class="form-control" ng-model="dtp.fmt" ng-options="f.name for f in dtp.formats"></select>
			</p>
		</div>
		<div class="form-group col-md-6" ng-controller="Datepicker2Ctrl" ng-init="dtp_value={val:d.value,name:'end'};">
			<label>Bis</label>

			<p class="input-group">
				<input type="text" class="form-control" datepickerMode="{{dtp.mode}}" datepicker-mode="{{dtp.mode}}" datepicker-options="dtp.options" datepicker-popup="{{dtp.fmt.fmt}}" ng-model="dtp.date" is-open="dtp.opened" ng-required="true" close-text="Schließen" ng-blur='dtp.validate()'/>
				<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="dtp.open($event)"><i class="glyphicon glyphicon-calendar"></i></button></span>
				<select class="form-control" ng-model="dtp.fmt" ng-options="f.name for f in dtp.formats"></select>
			</p>
		</div>
		<div class="form-group col-md-12">
			<label>Quellen</label>
			<div class="form-group" ng-controller="StringsEdit">
				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="Quelle" ng-model="currentedit" ng-enter="addEntry(d.value, 'sources', currentedit)">
					<span ng-show="canAddEntry(d.value, 'sources', currentedit)" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addEntry(d.value, 'sources', currentedit)"></span>
				</div>
				<div class="label-list">
					<div ng-repeat="o in d.value.sources" class="label label-default">
						<span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Entfernen" ng-click="removeEntry(d.value, 'sources', o)"></i>
					</div>
				</div>
			</div>
		</div>
		<div class="form-group col-md-6">
			<label>Verifiziert</label>

			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="d.value.verified"> <span ng-if="d.value.verified"><b>Ja</b>/Nein</span><span ng-if="!d.value.verified">Ja/<b>Nein</b></span>
				</label>
			</div>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-association.html">
	<form class="form">
		<div class="form-group col-md-6">
			<label>Typ</label>
			<select class="form-control" ng-model="d.value.type" ng-options="x.id as x.name for x in $root.globals.types[d.format].types"></select>
		</div>
		<div class="form-group col-md-6">
			<label>Position</label>
			<input type="text" class="form-control" ng-model="d.value.position">
		</div>
		<div class="form-group col-md-6" ng-controller="Datepicker2Ctrl" ng-init="dtp_value={val:d.value,name:'start'};">
			<label>Von</label>

			<p class="input-group">
				<input type="text" class="form-control" datepickerMode="{{dtp.mode}}" datepicker-mode="{{dtp.mode}}" datepicker-options="dtp.options" datepicker-popup="{{dtp.fmt.fmt}}" ng-model="dtp.date" is-open="dtp.opened" ng-required="true" close-text="Schließen" ng-blur='dtp.validate()'/>
				<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="dtp.open($event)"><i class="glyphicon glyphicon-calendar"></i></button></span>
				<select class="form-control" ng-model="dtp.fmt" ng-options="f.name for f in dtp.formats"></select>
			</p>
		</div>
		<div class="form-group col-md-6" ng-controller="Datepicker2Ctrl" ng-init="dtp_value={val:d.value,name:'end'};">
			<label>Bis</label>

			<p class="input-group">
				<input type="text" class="form-control" datepickerMode="{{dtp.mode}}" datepicker-mode="{{dtp.mode}}" datepicker-options="dtp.options" datepicker-popup="{{dtp.fmt.fmt}}" ng-model="dtp.date" is-open="dtp.opened" ng-required="true" close-text="Schließen" ng-blur='dtp.validate()'/>
				<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="dtp.open($event)"><i class="glyphicon glyphicon-calendar"></i></button></span>
				<select class="form-control" ng-model="dtp.fmt" ng-options="f.name for f in dtp.formats"></select>
			</p>
		</div>
		<div class="form-group col-md-12">
			<label ng-bind="d.value.type=='pass'?'Ausgestellt durch':'Beschreibung'"></label>
			<input type="text" class="form-control" ng-model="d.value.desc">
		</div>
		<div class="form-group col-md-12">
			<label>Quellen</label>
			<div class="form-group" ng-controller="StringsEdit">
				<div class="has-feedback">
					<input type="text" class="form-control" placeholder="Quelle" ng-model="currentedit" ng-enter="addEntry(d.value, 'sources', currentedit)">
					<span ng-show="canAddEntry(d.value, 'sources', currentedit)" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addEntry(d.value, 'sources', currentedit)"></span>
				</div>
				<div class="label-list">
					<div ng-repeat="o in d.value.sources" class="label label-default">
						<span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Entfernen" ng-click="removeEntry(d.value, 'sources', o)"></i>
					</div>
				</div>
			</div>
		</div>
		<div class="form-group col-md-6">
			<label>Verifiziert</label>

			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="d.value.verified"> <span ng-if="d.value.verified"><b>Ja</b>/Nein</span><span ng-if="!d.value.verified">Ja/<b>Nein</b></span>
				</label>
			</div>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-number.html">
	<form class="form">
		<div class="form-group col-md-4">
			<input type="number" class="form-control" placeholder="Zahl" ng-model="d.value">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-integer.html">
	<form class="form">
		<div class="form-group col-md-4">
			<input type="number" class="form-control" placeholder="Zahl" ng-model="d.value">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-string.html">
	<form class="form">
		<div class="form-group col-md-12" ng-controller="AutoCompleteCtrl">
			<input type="text" class="form-control" placeholder="Text" ng-model="d.value" datasets="datasetString" ngtypeahead>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-photo.html">
	<form class="form">
		<div class="form-group col-md-12">
			<label>URL</label>
			<input type="url" class="form-control" placeholder="URL" ng-model="d.value.url">
		</div>
		<div class="form-group col-md-12">
			<label>Copyright</label>
			<input type="text" class="form-control" placeholder="Copyright" ng-model="d.value.copyright">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-strings.html">
	<form class="form">
		<div class="form-group col-md-12">
			<input type="text" class="form-control" placeholder="Text" ng-model="d.value">
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-tags.html">
	<form class="form">
		<div class="form-group col-md-12" ng-controller="TagEdit">
			<div class="has-feedback">
				<input type="text" class="form-control" placeholder="{{d.desc}}" ng-model="edit[d.key]" ng-enter="addTagEntry(d, edit[d.key])" datasets="d.dataset" ngtypeahead>
				<span ng-show="canAddTagEntry(d, edit[d.key])" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addTagEntry(d, edit[d.key])"></span>
			</div>
			<div class="label-list">
				<div ng-repeat="o in d.value" class="label label-default">
					<span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Entfernen" ng-click="removeTagEntry(d, o)"></i>
				</div>
			</div>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-bool.html">
	<form class="form">
		<div class="form-group col-md-12">
			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="d.value"> <span ng-if="d.value"><b>Ja</b>/Nein</span><span ng-if="!d.value">Ja/<b>Nein</b></span>
				</label>
			</div>
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafield-default.html">
	<form class="form">
		<div class="form-group col-md-12">
			Bearbeiten von Datentyp <span ng-bind="d.format"></span> wird noch nicht unterstützt.
		</div>
	</form>
</script>

<script type="text/ng-template" id="partials/datafields.html">

	<div ng-repeat="d in fields" ng-controller="FieldListEditCtrl">
		<p class="field-headline"><span ng-bind="d.desc||$root.globals.types[d.format].name"></span><i ng-show="!d.fixed" class="glyphicon glyphicon-remove btn-right" title="{{d.desc||d.format}} entfernen" ng-click="removeData(d,fields)"></i></p>

		<div class="row" ng-include="getFieldPartial(d)"></div>
		<hr ng-if="$index==fields.length"/>
	</div>

</script>

<script type="text/ng-template" id="partials/relation-modal.html">

	<div ng-controller="RelationModalEditCtrl">
		<div class="modal-header">
			<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
			<h4 class="modal-title">
				Verbindung <span ng-if="isNew">anlegen</span><span ng-if="!isNew">bearbeiten</span>
			</h4>
		</div>
		<div class="modal-body" ng-controller="RelationEditCtrl">
			<div ng-include="'partials/relation-edits.html'"></div>
		</div>
		<div class="modal-footer">
			<button ng-if="!isNew" class="btn btn-primary" ng-click="save()">Aktualisieren</button>
			<button ng-if="isNew" class="btn btn-primary" ng-click="createnew()">Anlegen</button>
			<button class="btn btn-warning" ng-click="cancel()">Abbruch</button>
		</div>
	</div>

</script>

<script type="text/ng-template" id="partials/relation-edits.html">

	<form class="form">
		<div class="form-group">
			<label>Bezug 1</label>

			<div class="has-feedback">
				<input type="text" class="form-control" placeholder="Bezug 1" ng-model="edit.one.name" datasets="datasetEntitiesOne" ngtypeahead>
				<span ng-show="edit.one._id" class="glyphicon glyphicon-ok form-control-feedback"></span>
			</div>
		</div>
		<div class="form-group">
			<label>Bezug 2</label>

			<div class="has-feedback">
				<input type="text" class="form-control" placeholder="Bezug 2" ng-model="edit.two.name" datasets="datasetEntitiesTwo" ngtypeahead>
				<span ng-show="edit.two._id" class="glyphicon glyphicon-ok form-control-feedback"></span>
			</div>
		</div>
		<div class="form-group">
			<label>Art</label>
			<span class="dropdown dropdown-btn-right">
				<a role="button" data-toggle="dropdown" class="dropdown-toggle" href><span class="caret"></span>&nbsp;</a>
				<ul role="menu" class="dropdown-menu">
					<li ng-repeat="t in types"><a href ng-click="relation.type=t" ng-bind="t"></a></li>
				</ul>
			</span>
			<input type="text" class="form-control" placeholder="Art" ng-model="relation.type" datasets="datasetTypes" ngtypeahead>
		</div>
		<div class="form-group">
			<label>Schlagworte</label>
			<span class="dropdown dropdown-btn-right">
				<a role="button" data-toggle="dropdown" href><span class="caret"></span>&nbsp;</a>
				<ul role="menu" class="dropdown-menu">
					<li ng-repeat="t in tags"><a href ng-click="addEntry('tags', t)" ng-bind="t"></a></li>
				</ul>
			</span>

			<div class="has-feedback">
				<input type="text" class="form-control" placeholder="Schlagworte" ng-model="edit.tags" datasets="datasetTags" ngtypeahead>
				<span ng-show="canAddEntry('tags', edit.tags)" class="glyphicon glyphicon-plus-sign form-control-feedback clickable" ng-click="addEntry('tags', edit.tags)"></span>
			</div>
			<div class="label-list">
				<div ng-repeat="o in relation.tags" class="label label-default"><span ng-bind="o"></span><i class="glyphicon glyphicon-remove btn-label-right" title="Tag entfernen" ng-click="removeEntry('tags', o)"></i></div>
			</div>
		</div>
		<div ngdatafields data-fields="relation.data" data-fieldsowner="relation"></div>
	</form>

	<div class="btn-group">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
			Datenfeld hinzufügen <span class="caret"></span>
		</button>

		<ul class="dropdown-menu up" role="menu">
			<li ng-repeat="o in fields"><a href ng-click="addData(o)" ng-bind="o.name"></a></li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="partials/relation.html">
	<div class="row" ng-controller="RelationEditCtrl">
		<div class="col-md-6 col-md-offset-3">
			<h1>Verbindung <span ng-if="isNew">anlegen</span><span ng-if="!isNew">bearbeiten</span></h1>

			<div ng-include="'partials/relation-edits.html'"></div>

			<div class="pull-right">
				<button ng-if="!isNew" class="btn btn-primary" ng-click="save()">Aktualisieren</button>
				<button ng-if="isNew" class="btn btn-primary" ng-click="createnew()">Anlegen</button>
				<button class="btn btn-default" ng-click="back()">Abbruch</button>
			</div>
		</div>
	</div>

</script>

<script type="text/ng-template" id="partials/whitelist.html">


	<div class="row">
		<div class="col-md-6 headline">
			<h1>Whitelist</h1>

			<p>Anzahl <span ng-bind="tableParams.total()"></span></p>
		</div>

		<div class="col-md-3">
			<div class="pull-right">
				<label>Aktionen</label>

				<div>
					<button class="btn btn-default" ng-click="newEntry();">Eintrag anlegen</button>
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div ng-include="'partials/filter.html'"></div>
		</div>
	</div>
	<div ng-if="loading" class="loading">
		<h1><i class="fa fa-spin fa-spinner"></i> Whitelist<br/>wird geladen</h1>
	</div>

	<table ng-table="tableParams" template-pagination="partials/pager-blank.html" show-filter="false" class="table table-striped">

		<thead>
		<tr>
			<th
					class="sortable" ng-class="{
                    'sort-asc': tableParams.isSortBy('name', 'asc'),
                    'sort-desc': tableParams.isSortBy('name', 'desc')
                  }"
					ng-click="tableParams.sorting('name', tableParams.isSortBy('name', 'asc') ? 'desc' : 'asc')">
				<span>URL</span>
				<span ng-class="{'fa-sort-asc':tableParams.isSortBy('name', 'asc'),'fa-sort-desc':tableParams.isSortBy('name', 'desc')}" class="fa"></span>
			</th>
			<th class="text-right">Aktionen</th>
		</tr>
		</thead>

		<tbody>
		<tr ng-repeat="p in $data">
			<td>
				<span ng-bind="p.name"></span>
			</td>
			<td class="col-action-large">
				<span class="btn-right" ng-click="remove(p)" title="Eintrag löschen"><i class="fa fa-trash"></i></span>
				<span class="btn-right" title="URL bearbeiten" ng-click="editEntry(p)"><i class="fa fa-pencil"></i></span>
			</td>
		</tr>
		</tbody>
	</table>

</script>

<script type="text/ng-template" id="partials/whitelist-edit-modal.html">

	<div class="modal-header">
		<button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button>
		<h4 class="modal-title">
			Whitelist-URL <span ng-if="data.isNew">anlegen</span><span ng-if="!data.isNew">bearbeiten</span>
		</h4>
	</div>
	<div class="modal-body" ng-controller="RelationEditCtrl">
		<div class="form-group">
			<input type="text" class="form-control" placeholder="URL" ng-model="data.site">
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="ok()">
			<span ng-if="!data.isNew">Aktualisieren</span>
			<span ng-if="data.isNew">Anlegen</span>
		</button>
		<button class="btn btn-warning" ng-click="cancel()">Abbruch</button>
	</div>

</script>

<script type="text/ng-template" id="partials/update.html">
	<div class="row">
		<div class="col-md-4 headline">
			<h1>Updates</h1>

			<p>Anzahl <span ng-bind="updates.length"></span></p>

		</div>
		<!--<div class="col-md-5">-->
		<!--<div class="pull-right">-->
		<!--<label>Aktionen</label>-->
		<!---->
		<!--<div>-->
		<!--<button class="btn btn-default" ui-sref="person({id: 'new'})">Person anlegen</button>-->
		<!--<div class="btn-group">-->
		<!--<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">-->
		<!--Daten anzeigen <span class="caret"></span>-->
		<!--</button>-->
		<!--<ul class="dropdown-menu" role="menu">-->
		<!--<li ng-repeat="o in fields" ng-class="{active:isFieldActive(o)}"><a href ng-click="toggleField(o)" ng-bind="o.name"></a></li>-->
		<!--</ul>-->
		<!--</div>-->
		<!--</div>-->
		<!--</div>-->
		<!--</div>-->
		<!--<div class="col-md-3">-->
		<!--<div ng-include="'partials/filter.html'"></div>-->
		<!--</div>-->
	</div>

	<div class="update" ng-if="updates.length>0">
		<div class="detail-row">
			<div class="detail-col">
				<div class="update-head">Update Daten</div>
			</div>
			<div class="detail-col">
				<div class="update-head">Vorhandene Daten</div>
			</div>
		</div>

		<div class="item" ng-repeat="entry in updates | pagination: curPage * pageSize | limitTo: pageSize">
			<div class="info" ng-click="show(entry)">
				<i class="fa" ng-class="{'fa-plus':!entry.$visible,'fa-minus':entry.$visible}"></i>
				<i class="fa" ng-class="{'fa-user':entry.type=='person','fa-building-o':entry.type=='entity'}"></i>
				<span ng-bind="entry.name"></span>
				<!--<i ng-if="entry.$visible" class="fa fa-remove"></i>-->
			</div>
			<i ng-if="entry.$loading" class="fa fa-spin fa-spinner fa-2x"></i>

			<div ng-if="entry.$visible" class="details">

				<!--<div class="details-head" ng-bind="entry.type=='person'?'Person':'Organisation'"></div>-->

				<div class="detail-row">
					<div class="detail-col">
						<i class="fa" ng-class="{'fa-user':entry.update.entity.type=='person','fa-building-o':entry.update.entity.type=='entity'}"></i>
						<span ng-bind="entry.update.entity.name"></span>
						<a class="btn-right" href ng-click="deleteEntity(entry)" title="Eintrag löschen"><i class="fa fa-trash"></i></a>
						<a class="btn-right" href ng-click="searchEntity(entry.update.entity)" title="Passenden Eintrag suchen"><i class="fa fa-search"></i></a>
						<a class="btn-right" href ng-click="editEntity(entry.update.entity)" title="Eintrag bearbeiten"><i class="fa fa-edit"></i></a>
						<a ng-if="(entry.update.matches.length==0)" class="btn-right" href ng-click="createEntity(entry)" title="Eintrag anlegen"><i class="fa fa-arrow-right"></i></a>

						<div>
							<span class="detail-label">Aliase:</span> <span ng-bind="entry.update.entity.aliases"></span><br/>
							<span class="detail-label">Importer:</span> <span ng-bind="entry.update.entity.importer"></span><br/>
						</div>
						<div class="detail-field" ng-repeat="d in entry.update.data_matches">
							<span class="detail-label" ng-bind="d.data.desc"></span>
							<span ng-bind="d.data | fieldvalue"></span>
						</div>
					</div>
					<div class="detail-col" ng-if="entry.update.matches.length==0">
						<a class="action" href ng-click="createEntity(entry)"><i class="fa fa-arrow-right"></i> Eintrag anlegen</a><br/>
					</div>
					<div class="detail-col" ng-if="(entry.update.matches.length==1)">
						<span ng-bind="entry.update.matches[0].name"></span><br/>
						<span class="detail-label">Aliase:</span> <span ng-bind="entry.update.matches[0].aliases"></span><br/>
						<span class="detail-label">Importer:</span> <span ng-bind="entry.update.matches[0].importer"></span><br/>

						<div class="detail-field" ng-repeat="d in entry.update.data_matches">
							<div ng-if="d.match" title="{{d.match.format}}" ng-bind="d.match | fieldvalue"></div>
							<div ng-if="!d.match">
								<a class="action" href ng-click="applyEntityData(d.data, entry.update.entity)"><i class="fa fa-arrow-right"></i> Daten übernehmen</a>
							</div>
						</div>
					</div>
					<div class="detail-col" ng-if="entry.update.matches.length>1">
						<div ng-repeat="ent in entry.update.matches">
							-> <span ng-bind="ent.name"></span>
						</div>
					</div>
				</div>

				<div class="relations" ng-if="entry.update.relations.length">
					<div class="detail-row">
						<div class="detail-col">
							<div class="details-head">Verbindungen</div>
						</div>
						<div class="detail-col">
							<!--<a ng-if="entry.update.relations.length>1" href ng-click="createRelations(entry)"><i class="fa fa-arrow-right"></i> Alle Verbindungen anlegen</a>-->
						</div>
					</div>

					<div class="detail-row" ng-repeat="rel_info in entry.update.relations">
						<div class="detail-col">
							<b ng-bind="rel_info.entity.name"></b>
							<a class="btn-right" href ng-click="deleteRelation(rel_info.rel)" title="Verbindung löschen"><i class="fa fa-trash"></i></a>
							<a class="btn-right" href ng-click="searchEntity(rel_info.entity)" title="Passenden Eintrag suchen"><i class="fa fa-search"></i></a>
							<a class="btn-right" href ng-click="editEntity(rel_info.entity)" title="Eintrag bearbeiten"><i class="fa fa-edit"></i></a>
							<a ng-if="(rel_info.matches.length==0)" class="btn-right" href ng-click="createRelation(rel_info.rel)" title="Verbindung anlegen"><i class="fa fa-arrow-right"></i></a>

							<div class="detail-field" ng-repeat="d in rel_info.data_matches">
								<div title="{{d.data.format}}" ng-bind="d.data | fieldvalue"></div>
							</div>
						</div>
						<div class="detail-col">
							<div ng-if="(rel_info.entity_matches.length!==0)"><b ng-bind="rel_info.entity_matches[0].name"></b></div>
							<div ng-if="(rel_info.matches.length==0)"><a class="action" href ng-click="createRelation(rel_info.rel)"><i class="fa fa-arrow-right"></i> Verbindung anlegen</a></div>
							<div class="detail-field" ng-repeat="d in rel_info.data_matches">
								<div ng-if="d.match" title="{{d.match.format}}" ng-bind="d.match | fieldvalue"></div>
								<div ng-if="!d.match && (rel_info.entity_matches.length!==0) && (rel_info.matches.length!==0)">
									<a class="action" href ng-click="applyRelationData(d.data, rel_info.rel)"><i class="fa fa-arrow-right"></i> Daten übernehmen</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<br/>

	<div ng-if="updates.length>0" ng-include="'partials/pager.html'"></div>

</script>

</body>
</html>